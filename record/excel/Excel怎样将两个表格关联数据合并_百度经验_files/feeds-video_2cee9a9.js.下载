define("article:widget/exp-video/feeds-video/feeds-video.js",function(e,i,o){function d(e){var i=r(".feeds-video-list-item",m);r.each(i,function(i,o){r(o).on("click",function(){if(!r(o).hasClass("current")){{r(".feeds-video-list-item",m)}g=r(".feeds-video-list-item",m).eq(i).attr("vid"),e.playlistItem(i),u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"click-play",seedVid:y,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i,isFromPlayList:1,expFeedsVideoTestParam:w})}})}),m.on("click",".jw-icon-playback",function(){var i=e.getPlaylistIndex();setTimeout(function(){r(".jwplayer",m).hasClass("jw-state-paused")?u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-pause",seedVid:y,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i,expFeedsVideoTestParam:w}):u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-play",seedVid:y,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i,expFeedsVideoTestParam:w})},100)}),m.on("click",".jw-icon-volume",function(){var i=e.getPlaylistIndex(),o=e.getMute();u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-volume",seedVid:y,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i,mute:o,expFeedsVideoTestParam:w})}),m.on("mousedown",".scrollbar",function(){var i=e.getPlaylistIndex();u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-feeds-scrollbar-click",seedVid:y,alreadyPlay:V[i]||0,videoIndex:i,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g,expFeedsVideoTestParam:w})});var o=0;m.on("mouseleave",".feeds-video-list-ul",function(){o=0}),m.on("mousewheel",".feeds-video-list-ul",function(i,d){if(0===o){o=d;var t=e.getPlaylistIndex();u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-feeds-scrollbar-wheel",seedVid:y,alreadyPlay:V[t]||0,videoIndex:t,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g,expFeedsVideoTestParam:w})}})}function t(){var e=r(".feeds-video-loading-cover");e.stop(!0,!0).animate({width:0},2e3,function(){e.css({width:"100%"})})}function n(e){var i=(r("#feeds-video-play-box"),r(".feeds-video-loading",m)),o=[];r.each(e.videoList,function(e,i){o.push({image:i.coverUrl,sources:[{file:i.playUrl}]})}),p=window.cyberplayer("feeds-video-play-container").setup({flashplayer:f.cyberplayer,width:448,height:252,autostart:!1,stretching:"uniform",volume:50,controls:!0,repeat:!1,starttime:0,playlist:o,preload:"auto",ak:"b9855350588c4b63b127cebd1d1d252b"}),p.on("ready",function(){setTimeout(function(){"1"!==w&&(p.setMute(!0),p.play(),u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"auto-play",seedVid:y,alreadyPlay:0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:0,expFeedsVideoTestParam:w}))},1500),r(".jw-text-duration",m).text("00:00"),r(".feeds-video-play-box").addClass("pause")}).on("pause",function(){r(".feeds-video-play-box").removeClass("playing").addClass("pause")}).on("play",function(){r(".feeds-video-play-box").removeClass("pause complete playlistComplete").addClass("playing");var e=p.getPosition(),i=p.getDuration(),o=p.getPlaylistIndex();u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-play",seedVid:y,videoIndex:o,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),alreadyPlay:V[o]||0,feedsVid:g,playTime:e,videoDuration:i,expFeedsVideoTestParam:w}),V[o]=1}).on("complete",function(){h=!1,r(".feeds-video-play-box").removeClass("playing").addClass("complete");var e=r(".feeds-video-list-item",m),i=e.length,o=p.getPlaylistIndex(),d=o+1;d=d>=i?0:d;var t=p.getDuration();u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"play-end-100",seedVid:y,videoIndex:o,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),alreadyPlay:V[o]||0,feedsVid:g,videoDuration:t,expFeedsVideoTestParam:w}),0!==d&&(g=r(".feeds-video-list-item",m).eq(d).attr("vid"),u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"auto-play",seedVid:y,alreadyPlay:V[d]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:d,expFeedsVideoTestParam:w}))}).on("playlistItem",function(){var e=p.getPlaylistIndex();("1"!==w||0!==e)&&(t(),i.show(),v&&window.clearInterval(v),v=setInterval(t,2e3)),g=r(".feeds-video-list-item",m).eq(e).attr("vid");var o=r(".feeds-video-list-item",m);o.removeClass("current").eq(e).addClass("current")}).on("error",function(){r(".feeds-video-play-box").removeClass("playing complete pause").addClass("error"),v&&window.clearInterval(v),i.hide(),r(".jw-title",m).text("哎呀，视频出错啦，请刷新页面重新开始播放视频").show(),r(".jw-text-duration",m).text("00:00")}).on("playlistComplete",function(){r(".feeds-video-play-box").removeClass("playing complete pause").addClass("playlistComplete"),v&&window.clearInterval(v),i.show()}).on("time",function(e){var o=r(".jw-title",m);if(e.position>0){v&&window.clearInterval(v),i.hide();var d=p.getPlaylistIndex();if(e.position<.2){var t=92.5;0===d?t=100:1===d?t=97.5:2===d&&(t=95),o.text("为您找到与问题匹配度"+t+"%的视频").show(),setTimeout(function(){o.hide()},2500)}var n=parseInt(p.getDuration()-e.position,10);5>=n&&n>0?d!==p.getPlaylist().length-1&&o.text(n+"秒后即将播放下一条视频").show():e.position>=0&&-1!==o.text().indexOf("将播放下一条视频")&&o.hide();var a=e.position,s=p.getDuration(),l=Math.floor(.8*s);if(a>=l){if(h)return;u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"play-end-80",seedVid:y,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:p.getPlaylistIndex(),videoDuration:s,expFeedsVideoTestParam:w}),h=!0}else h=!1}}).on("fullscreen",function(e){if(e.fullscreen){var i=p.getPosition(),o=p.getDuration(),d=p.getPlaylistIndex();u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-fullscreen",seedVid:y,videoIndex:d,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),alreadyPlay:V[d]||0,feedsVid:g,playTime:i,videoDuration:o,expFeedsVideoTestParam:w})}}).on("mediaError",function(){r(".feeds-video-play-box").removeClass("playing complete pause").addClass("error"),v&&window.clearInterval(v),i.hide(),r(".jwplayer",m).addClass("jw-state-error"),r(".jw-title",m).text("哎呀，网络连接断了，请重连网络后刷新页面重新开始播放视频").show()}).on("beforePlay",function(){var e=p.getPlaylistIndex();"1"===w&&0===e&&r(".jwplayer",m).hasClass("jw-state-idle")&&u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"click-play",seedVid:y,alreadyPlay:V[e]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:e,isFromPlayList:0,expFeedsVideoTestParam:w})}),d(p)}function a(){r("#feeds-video-list-box").addClass("scrollbar-inner").scrollbar()}function s(){if(!b){var e=r(".feeds-video-play-box");if(p){var i=r(".video-originate-container")[0];if(r(window).scrollTop()>e.offset().top+280){e.addClass("miniVideo");var o=c.dom.q("content-container")[0],d=parseInt(c.dom.getCurrentStyle(o,"width"),10),t=(Math.max(c.page.getViewHeight(),434),c.page.getViewWidth()),n=Math.max((t-d)/2,60)-60;c.dom.fixable(i,{vertival:"bottom",horizontal:"right",offset:{x:n+60,y:10},autofix:!0}),i.style.display="block"}else i.style.position="static",e.removeClass("miniVideo")}}}function l(e){var i=window.navigator.userAgent.toLowerCase();if((i.match(/msie\s\d+/)&&i.match(/msie\s\d+/)[0]||i.match(/trident\s?\d+/)&&i.match(/trident\s?\d+/)[0])&&(window.ieVersion=i.match(/msie\s\d+/)[0].match(/\d+/)[0]||i.match(/trident\s?\d+/)[0],window.ieVersion<=8)){var o=['<div class="feeds-video-play-ie">','<div class="feeds-video-play-ie-icon"></div>','<div class="feeds-video-play-ie-text">',"<p>哎呀，当前浏览器无法播放该视频，</p>","<p>请升级到最新版本的浏览器。</p>","</div>",'<a class="feeds-video-play-ie-tip" href="/article/fdbd4277c385f2b89e3f488c.html" target="_blank">',"如何升级</a>","</div>"].join("");return r(".feeds-video-play-box").html(o),void u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"page-show",ifie:1,seedVid:y,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g,expFeedsVideoTestParam:w})}var d=x.find(".feeds-video-list-item-0").attr("vid");g=y=d,F.context("feedVideoGroup",x.attr("feed-group")),u.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"page-show",seedVid:y,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g,expFeedsVideoTestParam:w}),n(e),a();var t=r(".video-originate-container");r(".video-mini-back",t).on("click",function(e){e.preventDefault(),r("html, body").animate({scrollTop:r(".feeds-video-play-box").offset().top-64},500)}),r(".video-mini-pause",t).on("click",function(e){e.preventDefault(),p&&p.pause()}),r(".video-mini-replay",t).on("click",function(e){e.preventDefault(),p&&p.play()}),r(".video-mini-play",t).on("click",function(e){e.preventDefault(),p&&p.play()}),r(".video-originate-mini-close",t).on("click",function(e){e.preventDefault(),b=!0,t.css({position:"static"}),r(".feeds-video-play-box").removeClass("miniVideo")}),r(window).on("scroll resize",s)}var r=e("common-jquery:widget/lib/jquery/jquery.js"),c=e("common:widget/lib/tangram/base/base.js"),f=e("common-jquery:widget/js/util/uri/uri.js");e("common-jquery:widget/js/ui/scrollbar-new/scrollbar-new.js"),e("common-jquery:widget/lib/jquery.ui/jquery.ui.mousewheel.js");var p,v,u=e("common-jquery:widget/js/logic/log/log.js"),m=r(".feeds-video-box"),x=r(".feeds-video-list-ul"),y=0,g=F.context("feedsVid"),V={},h=!1,w=F.context("expFeedsVideoTestParam"),b=!1;o.exports.init=l});